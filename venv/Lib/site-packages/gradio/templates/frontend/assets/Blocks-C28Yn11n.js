const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./ApiDocs-B0-eJxtX.js","./clear-BJfJ8fXC.js","./i18n-jwgpNIDD.js","./index-CGvp2os9.js","./index-84zif7Jb.css","./i18n-BnliXTrJ.css","./Button-DKeCukyW.js","./Image-Bdf4wQSw.js","./Image-Da_XA0w6.css","./ImagePreview-wP3cuUYr.js","./utils.svelte-Ceck75cM.js","./IconButtonWrapper-CKkeBFM2.js","./MarkdownCode-DE3cszAA.js","./prism-python-t00J-xmS.js","./MarkdownCode-M16z1Sc7.css","./IconButtonWrapper-DVQ8sIMc.css","./ShareButton-l5f_cszo.js","./FullscreenButton-CLbadLV1.js","./ImagePreview-CCVfwC4m.css","./Button-BZ4d-rtD.css","./StreamingBar-CiZ1eSYP.js","./StreamingBar-K0YZHDYh.css","./init.svelte-e7TNwPPP.js","./state.svelte-DFm6rEHb.js","./ApiDocs-YhV7c3aO.css","./ApiRecorder-Q5sQ_mRL.js","./ApiRecorder-CoSLrx_1.css","./Settings-BA8IMO-m.js","./Index-B4JJuPUY.js","./Example-Ctdnw0MA.js","./Example-BeU1J4ps.css","./Index-CRhvQE-V.css","./Index-CHKikD1I.js","./Index-B2BpVHOS.css","./Settings-CLQaonub.css","./Index-BGx-TVvF.js","./Index-DfAqnet3.js","./Example-C8-r9viM.js","./Example-BK-tWmkG.css","./Index-wZDUWKrz.css","./Index-CRQYX_Su.js","./Example-BVMS6IPC.js","./Example-CgIc4GLa.css","./Index-cY7HT1Ac.css","./Index-DP8ihX8q.css"])))=>i.map(i=>d[i]);
import{_ as $}from"./index-CGvp2os9.js";import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{setContext as Ue,untrack as Ie,onMount as qe}from"./svelte/svelte_svelte.js";import{A as ke,v as Ge,$ as Ve,p as Be}from"./i18n-jwgpNIDD.js";import{writable as Ne}from"./svelte/svelte_store.js";import{T as Ze}from"./StreamingBar-CiZ1eSYP.js";import{d as We}from"./utils.svelte-Ceck75cM.js";import{A as He}from"./init.svelte-e7TNwPPP.js";import{L as Je}from"./state.svelte-DFm6rEHb.js";function Ce(l,t){e.push(t,!0);var a,i=e.run([async()=>a=await e.async_derived(()=>t.node.component)]),s=e.comment(),o=e.first_child(s);e.async(o,[i[0]],[()=>t.node&&e.get(a)],(_,u)=>{var p=L=>{var c=e.comment(),v=e.first_child(c);e.async(v,[i[0]],[()=>t.node.props.shared_props.visible],(R,g)=>{var D=d=>{var E=e.comment(),x=e.first_child(E);e.async(x,[i[0]],void 0,O=>{e.component(x,()=>e.get(a).default,(m,h)=>{h(m,{get shared_props(){return t.node.props.shared_props},get props(){return t.node.props.props},children:(V,B)=>{var b=e.comment(),A=e.first_child(b);e.async(A,[i[0]],[()=>t.node.children&&t.node.children.length],(N,Z)=>{var ie=H=>{var J=e.comment(),ne=e.first_child(J);e.async(ne,[i[0]],[()=>t.node.children],(W,Q)=>{e.each(W,17,()=>e.get(Q),e.index,(T,re)=>{Ce(T,{get node(){return e.get(re)}})})}),e.append(H,J)};e.if(N,H=>{e.get(Z)&&H(ie)})}),e.append(V,b)},$$slots:{default:!0}})})}),e.append(d,E)};e.if(R,d=>{e.get(g)&&d(D)})}),e.append(L,c)};e.if(_,L=>{e.get(u)&&L(p)})}),e.append(l,s),e.pop()}const Qe="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='576'%20height='576'%20viewBox='0%200%20576%20576'%20fill='none'%3e%3cpath%20d='M287.5%20229L86%20344.5L287.5%20460L489%20344.5L287.5%20229Z'%20stroke='url(%23paint0_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M287.5%20116L86%20231.5L287.5%20347L489%20231.5L287.5%20116Z'%20stroke='url(%23paint1_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='round'/%3e%3cpath%20d='M86%20344L288%20229'%20stroke='url(%23paint2_linear_102_7)'%20stroke-width='59'%20stroke-linejoin='bevel'/%3e%3cdefs%3e%3clinearGradient%20id='paint0_linear_102_7'%20x1='60'%20y1='341'%20x2='429.5'%20y2='344'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint1_linear_102_7'%20x1='513.5'%20y1='231'%20x2='143.5'%20y2='231'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3clinearGradient%20id='paint2_linear_102_7'%20x1='60'%20y1='344'%20x2='428.987'%20y2='341.811'%20gradientUnits='userSpaceOnUse'%3e%3cstop%20stop-color='%23F9D100'/%3e%3cstop%20offset='1'%20stop-color='%23F97700'/%3e%3c/linearGradient%3e%3c/defs%3e%3c/svg%3e",Ke="data:image/svg+xml,%3csvg%20width='28'%20height='28'%20viewBox='0%200%2028%2028'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M26.9425%202.94265C27.4632%202.42195%2027.4632%201.57773%2026.9425%201.05703C26.4218%200.536329%2025.5776%200.536329%2025.0569%201.05703L22.5713%203.54256C21.1213%202.59333%2019.5367%202.43378%2018.1753%202.64006C16.5495%202.88638%2015.1127%203.66838%2014.3905%204.39053L12.3905%206.39053C12.1405%206.64058%2012%206.97972%2012%207.33334C12%207.68697%2012.1405%208.0261%2012.3905%208.27615L19.7239%2015.6095C20.2446%2016.1302%2021.0888%2016.1302%2021.6095%2015.6095L23.6095%2013.6095C24.3316%2012.8873%2025.1136%2011.4505%2025.36%209.82475C25.5663%208.46312%2025.4066%206.87827%2024.4571%205.42807L26.9425%202.94265Z'%20fill='%233c4555'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M12.276%2012.9426C12.7967%2012.4219%2012.7967%2011.5777%2012.276%2011.057C11.7553%2010.5363%2010.9111%2010.5363%2010.3904%2011.057L8.66651%2012.7809L8.27615%2012.3905C8.0261%2012.1405%207.68697%2012%207.33334%2012C6.97972%2012%206.64058%2012.1405%206.39053%2012.3905L4.39053%2014.3905C3.66838%2015.1127%202.88638%2016.5495%202.64006%2018.1753C2.43377%2019.5367%202.59333%2021.1214%203.54262%2022.5714L1.05703%2025.057C0.536329%2025.5777%200.536329%2026.4219%201.05703%2026.9426C1.57773%2027.4633%202.42195%2027.4633%202.94265%2026.9426L5.42817%2024.4571C6.87835%2025.4066%208.46315%2025.5663%209.82475%2025.36C11.4505%2025.1136%2012.8873%2024.3316%2013.6095%2023.6095L15.6095%2021.6095C16.1302%2021.0888%2016.1302%2020.2446%2015.6095%2019.7239L15.2188%2019.3332L16.9426%2017.6093C17.4633%2017.0886%2017.4633%2016.2444%2016.9426%2015.7237C16.4219%2015.203%2015.5777%2015.203%2015.057%2015.7237L13.3332%2017.4475L10.5521%2014.6665L12.276%2012.9426Z'%20fill='%23FF7C00'/%3e%3c/svg%3e",Xe="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%3e%3c!--%20Outer%20gear%20teeth%20(gray)%20--%3e%3cpath%20d='M19.14%2012.94c.04-.3.06-.61.06-.94%200-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24%200-.43.17-.47.41l-.36%202.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47%200-.59.22L2.74%208.87c-.12.21-.08.47.12.61l2.03%201.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03%201.58c-.18.14-.23.41-.12.61l1.92%203.32c.12.22.37.29.59.22l2.39-.96c.5.38%201.03.7%201.62.94l.36%202.54c.05.24.24.41.48.41h3.84c.24%200%20.44-.17.47-.41l.36-2.54c.59-.24%201.13-.56%201.62-.94l2.39.96c.22.08.47%200%20.59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12%2015.6c-1.98%200-3.6-1.62-3.6-3.6s1.62-3.6%203.6-3.6%203.6%201.62%203.6%203.6-1.62%203.6-3.6%203.6z'%20fill='%23808080'/%3e%3c!--%20Inner%20circle%20(now%20gray)%20--%3e%3ccircle%20cx='12'%20cy='12'%20r='2.5'%20fill='%23808080'/%3e%3c/svg%3e",Ye="data:image/svg+xml,%3csvg%20viewBox='0%200%2020%2020'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20fill='%23000000'%3e%3cg%20id='SVGRepo_bgCarrier'%20stroke-width='0'%3e%3c/g%3e%3cg%20id='SVGRepo_tracerCarrier'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3c/g%3e%3cg%20id='SVGRepo_iconCarrier'%3e%3ctitle%3erecord%20[%23982]%3c/title%3e%3cdesc%3eCreated%20with%20Sketch.%3c/desc%3e%3cdefs%3e%3c/defs%3e%3cg%20id='Page-1'%20stroke='none'%20stroke-width='1'%20fill='none'%20fill-rule='evenodd'%3e%3cg%20id='Dribbble-Light-Preview'%20transform='translate(-380.000000,%20-3839.000000)'%20fill='%23FF0000'%3e%3cg%20id='icons'%20transform='translate(56.000000,%20160.000000)'%3e%3cpath%20d='M338,3689%20C338,3691.209%20336.209,3693%20334,3693%20C331.791,3693%20330,3691.209%20330,3689%20C330,3686.791%20331.791,3685%20334,3685%20C336.209,3685%20338,3686.791%20338,3689%20M334,3697%20C329.589,3697%20326,3693.411%20326,3689%20C326,3684.589%20329.589,3681%20334,3681%20C338.411,3681%20342,3684.589%20342,3689%20C342,3693.411%20338.411,3697%20334,3697%20M334,3679%20C328.477,3679%20324,3683.477%20324,3689%20C324,3694.523%20328.477,3699%20334,3699%20C339.523,3699%20344,3694.523%20344,3689%20C344,3683.477%20339.523,3679%20334,3679'%20id='record-[%23982]'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";let te=!1,G=null,de=[],$e=0,ee={},et,le,tt=null,oe=[];async function it(){if(!te)try{const l=document.title;document.title="[Sharing] Gradio Tab";const t=await navigator.mediaDevices.getDisplayMedia({video:{width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:30}},audio:!0,selfBrowserSurface:"include"});document.title=l;const a={videoBitsPerSecond:5e6};G=new MediaRecorder(t,a),de=[],ee={},G.ondataavailable=at,G.onstop=nt,G.start(1e3),te=!0,$e=Date.now()}catch(l){le("Recording Error","Failed to start recording: "+l.message,"error")}}function st(){!te||!G||(G.stop(),te=!1)}function at(l){l.data.size>0&&de.push(l.data)}function nt(){te=!1;const l=new Blob(de,{type:"video/mp4"});rt(l),(G?.stream?.getTracks()||[]).forEach(a=>a.stop())}async function rt(l){try{le("Processing video","This may take a few seconds...","info");const t=new FormData;t.append("video",l,"recording.mp4"),ee.start!==void 0&&ee.end!==void 0&&(t.append("remove_segment_start",ee.start.toString()),t.append("remove_segment_end",ee.end.toString())),oe.length>0&&t.append("zoom_effects",JSON.stringify(oe));const a=await fetch(et+"/gradio_api/process_recording",{method:"POST",body:t});if(!a.ok)throw new Error(`Server returned ${a.status}: ${a.statusText}`);const i=await a.blob(),s=`gradio-screen-recording-${new Date().toISOString().replace(/:/g,"-").replace(/\..+/,"")}.mp4`;ye(i,s),oe=[]}catch{le("Processing Error","Failed to process recording. Saving original version.","warning");const a=`gradio-screen-recording-${new Date().toISOString().replace(/:/g,"-").replace(/\..+/,"")}.mp4`;ye(l,a)}}function ye(l,t){const a=URL.createObjectURL(l),i=document.createElement("a");i.style.display="none",i.href=a,i.download=t,document.body.appendChild(i),i.click(),setTimeout(()=>{document.body.removeChild(i),URL.revokeObjectURL(a)},100)}const ot=/^'([^]+)'$/,xe=Symbol("NOVALUE");class lt{id;inputs;outputs;cancels;pending=!1;trigger_modes;event_args={};targets=[];connection_type;triggers=[];original_trigger_id=null;show_progress_on=null;component_prop_inputs=[];show_progress;functions;constructor(t){this.id=t.id,this.original_trigger_id=t.id,this.inputs=t.inputs,this.outputs=t.outputs,this.connection_type=t.connection,this.show_progress=t.show_progress,this.functions={frontend:t.js?ut(t.js,t.backend_fn,t.inputs.length,t.outputs.length):void 0,backend:t.backend_fn,backend_js:t.js_implementation?new ke(`let result = await (${t.js_implementation})(...arguments);
						return (!Array.isArray(result)) ? [result] : result;`):void 0},this.targets=t.targets,this.cancels=t.cancels,this.trigger_modes=t.trigger_mode,this.show_progress_on=t.show_progress_on||null,this.component_prop_inputs=t.component_prop_inputs||[];for(let a=0;a<t.event_specific_args?.length;a++){const i=t.event_specific_args[a];this.event_args[i]=t[i]??null}}async run(t,a,i,s){let o=a;return this.functions.backend_js?{type:"data",data:await this.functions.backend_js(...o)}:(this.functions.frontend&&(o=await this.functions.frontend(a)),this.functions.backend?{type:"submit",data:t.submit(this.id,o,i,s)}:this.functions.frontend?{type:"data",data:o}:{type:"void",data:null})}add_trigger(t,a){this.triggers.push([t,a])}get_triggers(){return{success:this.triggers.filter(([,t])=>t==="success").map(([t])=>t),failure:this.triggers.filter(([,t])=>t==="failure").map(([t])=>t),all:this.triggers.filter(([,t])=>t==="all").map(([t])=>t)}}}class dt{dependencies_by_fn=new Map;dependencies_by_event=new Map;render_id_deps=new Map;submissions=new Map;client;queue=new Set;add_to_api_calls;update_state_cb;get_state_cb;rerender_cb;log_cb;loading_stati=new Je;constructor(t,a,i,s,o,_,u){this.add_to_api_calls=u,this.log_cb=_,this.update_state_cb=i,this.get_state_cb=s,this.rerender_cb=o,this.client=a,this.reload(t,i,s,o,a)}reload(t,a,i,s,o){const{by_id:_,by_event:u}=this.create(t);this.dependencies_by_event=u,this.dependencies_by_fn=_,this.client=o,this.update_state_cb=a,this.get_state_cb=i,this.rerender_cb=s;for(const[p,L]of this.dependencies_by_fn)for(const[c]of L.targets)this.set_event_args(c,L.event_args);this.register_loading_stati(_)}register_loading_stati(t){for(const[a,i]of t)this.loading_stati.register(i.id,i.show_progress_on||i.outputs,i.inputs,i.show_progress)}clear_loading_status(t){this.loading_stati.clear(t)}async update_loading_stati_state(){for(const[t,a]of Object.entries(this.loading_stati.current))this.update_state_cb(Number(t),{loading_status:a},!1)}dispatch_state_change_events(t){if(t.changed_state_ids)for(const a of t.changed_state_ids)this.dependencies_by_event.get("change-"+a)?.forEach(s=>{this.dispatch({type:"fn",fn_index:s.id,target_id:a,event_data:null})})}async dispatch(t){let a;if(t.type==="fn"){const i=this.dependencies_by_fn.get(t.fn_index);i&&(a=[i])}else a=this.dependencies_by_event.get(`${t.event_name}-${t.target_id}`);for(let i=0;i<(a?.length||0);i++){const s=a?a[i]:void 0;if(s){this.cancel(s.cancels);const o=_t(s.trigger_modes,this.submissions.has(s.id));if(o==="skip")continue;if(o==="defer"){this.queue.add(s.id);continue}s.functions.backend&&(this.loading_stati.update({status:"pending",fn_index:s.id,stream_state:null}),this.update_loading_stati_state());const _=await this.gather_state(s.inputs,s.component_prop_inputs),u=await Promise.all(s.targets.map(([v])=>this.set_event_args(v,s.event_args))),{success:p,failure:L,all:c}=s.get_triggers();try{let v=null;if(t.target_id!==void 0||t.type==="event"?v=t.target_id||null:v=s.original_trigger_id,s.connection_type==="stream"&&this.submissions.has(s.id)){const g=this.submissions.get(s.id);let D={fn_index:s.id,data:_,event_data:t.event_data};g.send_chunk(D),u.forEach(d=>d());continue}this.add_to_api_calls({fn_index:s.id,data:_,event_data:t.event_data,trigger_id:v});const R=await s.run(this.client,_,t.event_data,v);if(R.type==="void")u.forEach(g=>g());else if(R.type==="data")await this.handle_data(s.outputs,R.data),u.forEach(g=>g());else{let g=null;s.connection_type==="stream"&&!this.submissions.has(s.id)&&(g="waiting"),this.submissions.set(s.id,R.data);let D=0;e:for await(const d of R.data)if(D===0&&s.inputs.forEach(E=>{this.update_state_cb(E,{loading_status:{validation_error:null}},!1)}),D+=1,d!==null){if(d.type==="data"&&await this.handle_data(s.outputs,d.data),d.type==="status"){d.original_msg==="process_starts"&&s.connection_type==="stream"&&(g="open");const{fn_index:E,...x}=d;if(d.stage==="complete"){g="closed",p.forEach(O=>{this.dispatch({type:"fn",fn_index:O,event_data:null,target_id:v})}),this.dispatch_state_change_events(d),this.loading_stati.update({...x,status:x.stage,fn_index:s.id,stream_state:g}),this.update_loading_stati_state();break e}else if(d.stage==="generating")this.dispatch_state_change_events(d),this.loading_stati.update({...x,status:x.stage,fn_index:s.id,stream_state:g}),this.update_loading_stati_state();else if(d.stage==="error"){if(Array.isArray(d?.message)){d.message.forEach((m,h)=>{this.update_state_cb(s.inputs[h],{loading_status:{validation_error:m.is_valid?null:m.message,show_validation_error:!0}},!1)}),s.outputs.forEach(m=>{s.inputs.includes(m)||this.update_state_cb(m,{loading_status:{status:null}},!1)}),u.forEach(m=>m()),this.submissions.delete(s.id),this.queue.has(s.id)&&(this.queue.delete(s.id),this.dispatch(t));return}const O=d?.message?.replace(ot,(m,h)=>h);throw this.log_cb(d?._title??"Error",O||"",E,"error",x.duration,x.visible),new Error("Dependency function failed")}else this.loading_stati.update({...x,status:x.stage,fn_index:s.id,stream_state:g}),this.update_loading_stati_state()}if(d.type==="render"){this.loading_stati.update({status:"complete",fn_index:s.id,stream_state:null}),this.update_loading_stati_state();const{layout:E,components:x,render_id:O,dependencies:m}=d.data;this.rerender_cb(x,E);const{by_id:h,by_event:V}=this.create(m);this.register_loading_stati(h),h.forEach(b=>this.dependencies_by_fn.set(b.id,b)),V.forEach((b,A)=>this.dependencies_by_event.set(A,b));const B=this.render_id_deps.get(O);B&&B.forEach(b=>{h.has(b)||this.dependencies_by_fn.delete(b)}),this.render_id_deps.set(O,new Set(Array.from(h.keys()))),this.register_loading_stati(h);break e}d.type==="log"&&this.handle_log(d)}c.forEach(d=>{this.dispatch({type:"fn",fn_index:d,event_data:null,target_id:v})}),u.forEach(d=>d()),this.submissions.delete(s.id),this.queue.has(s.id)&&(this.queue.delete(s.id),this.dispatch(t))}}catch{this.loading_stati.update({status:"error",fn_index:s.id,eta:0,queue:!1,stream_state:null}),this.update_loading_stati_state(),this.submissions.delete(s.id),L.forEach(R=>{this.dispatch({type:"fn",fn_index:R,event_data:null})})}}}}create(t){const a=new Map,i=new Map,s=[];for(const o of t){const _=new lt(o);for(const[u,p]of o.targets)i.has(`${p}-${u}`)||i.set(`${p}-${u}`,[]),i.get(`${p}-${u}`)?.push(_);if(a.set(o.id,_),o.trigger_after!==void 0){const u=o.trigger_only_on_failure?"failure":o.trigger_only_on_success?"success":"all";s.push([o.id,o.trigger_after,u])}}for(const[o,_,u]of s){const p=a.get(_);p&&(p.add_trigger(o,u),p.original_trigger_id=ft(t,_))}return{by_id:a,by_event:i}}handle_log(t){const{title:a,log:i,fn_index:s,level:o,duration:_,visible:u}=t;this.log_cb(a,i,s,o,_,u)}async handle_data(t,a){await Promise.all(t.map(async(i,s)=>{const o=a[s]===void 0?xe:a[s];if(o!==xe)if(ct(o)){let _=!1,u=null;for(const[p,L]of Object.entries(o))if(p!=="__type__"){if(p==="visible"){_=!0,u=L;continue}await this.update_state_cb(t[s],{[p]:L},!1)}_&&await this.update_state_cb(t[s],{visible:u},!0)}else await this.update_state_cb(i,{value:o},!1)}))}async gather_state(t,a=[]){return(await Promise.all(t.map(i=>this.get_state_cb(i)))).map((i,s)=>a.includes(s)?i??null:i?.value??null)}async set_event_args(t,a){let i={};const s=await this.get_state_cb?.(t);if(!s)return()=>{};for(const[o]of Object.entries(a))i[o]=s?.[o]??null;return Object.keys(a).length===0?()=>{}:(await this.update_state_cb(t,a,!1),()=>{this.update_state_cb(t,i,!1)})}async cancel(t){if(t)for(const a of t){const i=this.submissions.get(a);i&&(await i.cancel(),this.submissions.delete(a))}}dispatch_load_events(){this.dependencies_by_fn.forEach(t=>{t.targets.forEach(([a,i])=>{i==="load"&&this.dispatch({type:"fn",fn_index:t.id,event_data:null,target_id:a})})})}get_fns_from_targets(t){const a=[];return this.dependencies_by_event.forEach((i,s)=>{const[,o]=s.split("-");Number(o)===t&&i.forEach(_=>{a.push(_.id)})}),a}close_stream(t){const a=this.get_fns_from_targets(t);for(const i of a){const s=this.submissions.get(i);s&&(s.close_stream(),this.submissions.delete(i)),this.loading_stati.update({status:"complete",fn_index:i,eta:0,queue:!1,stream_state:"closed"})}this.update_loading_stati_state()}}function ct(l){return typeof l=="object"&&l!==null&&"__type__"in l&&l?.__type__==="update"}function _t(l,t){return t?l==="always_last"?"defer":l==="multiple"?"run":l==="once"?"skip":"run":"run"}function ut(l,t,a,i){const s=t?a===1:i===1;try{return new ke("__fn_args",`  let result = await (${l})(...__fn_args);
  if (typeof result === "undefined") return [];
  return (${s} && !Array.isArray(result)) ? [result] : result;`)}catch(o){throw o}}function ft(l,t){let a=new Map,i=t,s=0;for(;s<100;){const o=a.get(i)||l.find(_=>_.id===i);if(!o||(a.set(o.id,o),o.trigger_after===null||o.trigger_after===void 0))break;i=o.trigger_after,s+=1}return i}var gt=e.from_html("<!> <!>",1),pt=e.from_html('<button class="show-api svelte-zxu34v"><!> <img class="svelte-zxu34v"/></button>'),ht=e.from_html('<div class="divider show-api-divider svelte-zxu34v">·</div> <a href="https://gradio.app" class="built-with svelte-zxu34v" target="_blank" rel="noreferrer"> <img class="svelte-zxu34v"/></a>',1),vt=e.from_html('<div>·</div> <button class="settings svelte-zxu34v"> <img class="svelte-zxu34v"/></button>',1),mt=e.from_html('<footer class="svelte-zxu34v"><!> <!> <button> <img class="svelte-zxu34v"/></button> <div class="divider svelte-zxu34v">·</div> <!></footer>'),bt=e.from_html('<div id="api-recorder-container" class="svelte-zxu34v"><!></div>'),wt=e.from_html('<div class="api-docs svelte-zxu34v"><div class="backdrop svelte-zxu34v"></div> <div class="api-docs-wrap svelte-zxu34v"><!></div></div>'),yt=e.from_html('<div class="api-docs svelte-zxu34v"><div class="backdrop svelte-zxu34v"></div> <div class="api-docs-wrap svelte-zxu34v"><!></div></div>'),xt=e.from_html('<div class="wrap svelte-zxu34v"><div class="contain svelte-zxu34v"><!> <!></div> <!> <!> <!> <!></div> <!>',1);function kt(l,t){e.push(t,!0);const a=()=>e.store_get(Ge,"$reactive_formatter",o),i=()=>e.store_get(Ve,"$_",o),s=()=>e.store_get(Ee,"$is_screen_recording",o),[o,_]=e.setup_stores();e.prop(t,"render_complete",3,!1);let u=e.prop(t,"ready",15,!1),p=e.prop(t,"reload_count",11,0),L=e.prop(t,"add_new_message",15);t.components.forEach(n=>{n.props.i18n||(n.props.i18n=a())});let c=new He(t.components,t.layout,t.dependencies,{root:t.root,theme:t.theme_mode,version:t.version,api_prefix:t.api_prefix,max_file_size:t.max_file_size,autoscroll:t.autoscroll},t.app,a());Ue(We,{register:c.register_component.bind(c),dispatcher:R});let v=e.state(e.proxy([]));function R(n,r,f){if(r==="share"){const{title:w,description:k}=f}else r==="error"?T("Error",f,-1,r,10,!0):r==="warning"?T("Warning",f,-1,r,10,!0):r==="info"?T("Info",f,-1,r,10,!0):r=="clear_status"?(c.update_state(n,{loading_status:{}},!1),E.clear_loading_status(n)):r=="close_stream"?E.close_stream(n):(r==="select"&&n in c.initial_tabs&&(n=f.id),E.dispatch({type:"event",event_name:r,target_id:n,event_data:f}))}let g=e.state(e.proxy([])),D=e.state(null),d=n=>{e.set(D,n,!0),e.get(h)&&e.set(g,[...e.get(g),e.get(D)],!0)},E=new dt(t.dependencies,t.app,c.update_state.bind(c),c.get_state.bind(c),c.rerender.bind(c),T,d);e.user_effect(()=>{p(),Ie(()=>{c.reload(t.components,t.layout,t.dependencies,{root:t.root,theme:t.theme_mode,version:t.version,api_prefix:t.api_prefix,max_file_size:t.max_file_size,autoscroll:t.autoscroll}),E.reload(t.dependencies,c.update_state.bind(c),c.get_state.bind(c),c.rerender.bind(c),t.app)})});let x=350,O=e.derived(()=>t.search_params.get("view")==="api"&&t.footer_links.includes("api")),m=e.derived(()=>t.search_params.get("view")==="settings"),h=e.derived(()=>t.search_params.get("view")==="api-recorder"&&t.footer_links.includes("api")),V=!0,B=!0,b=null,A=null,N=null,Z=e.state(null);async function ie(){if(!b||!A){const n=await $(()=>import("./ApiDocs-B0-eJxtX.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]),import.meta.url),r=await $(()=>import("./ApiRecorder-Q5sQ_mRL.js"),__vite__mapDeps([25,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,26]),import.meta.url);b||(b=n?.default),A||(A=r?.default)}}async function H(){A||(A=(await $(()=>import("./ApiRecorder-Q5sQ_mRL.js"),__vite__mapDeps([25,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,26]),import.meta.url)).default)}async function J(){N||(N=(await $(()=>import("./Settings-BA8IMO-m.js"),__vite__mapDeps([27,2,3,4,5,1,28,10,11,12,13,14,15,20,21,29,30,31,32,33,22,23,34]),import.meta.url)).default)}async function ne(){if(!e.get(Z)){const n=await $(()=>import("./Index-BGx-TVvF.js"),__vite__mapDeps([35,3,4,36,2,5,10,20,11,12,13,14,15,21,37,38,39,40,41,42,43,44]),import.meta.url);e.set(Z,n.default,!0)}}async function W(n){e.set(h,!1),n&&await ie(),e.set(O,n);let r=new URLSearchParams(window.location.search);n?r.set("view","api"):r.delete("view"),history.replaceState(null,"","?"+r.toString())}async function Q(n){n&&await J();let r=new URLSearchParams(window.location.search);n?r.set("view","settings"):r.delete("view"),history.replaceState(null,"","?"+r.toString()),e.set(m,!e.get(m))}function T(n,r,f,w,k=10,j=!1){j&&e.get(v).push({title:n,message:r,fn_index:f,type:w,id:++re,duration:k,visible:j})}L(T);let re=-1;i()("blocks.long_requests_queue"),i()("blocks.connection_can_break"),i()("blocks.waiting_for_inputs");let Ee=Ne(!1),ce=0,K;function _e(){if("parentIFrame"in window){const n=K.children[0].getBoundingClientRect();if(!n)return;window.parentIFrame?.size(n.bottom+ce+32)}}function ue(){s()?st():it()}qe(()=>{"parentIFrame"in window&&window.parentIFrame?.autoResize(!1);const n=new MutationObserver(_e),r=new ResizeObserver(_e);return n.observe(K,{childList:!0,subtree:!0,attributes:!0}),r.observe(K),c.ready.then(()=>{u(!0),E.dispatch_load_events()}),t.vibe_mode&&ne(),()=>{n.disconnect(),r.disconnect()}});function Le(n){e.set(v,e.get(v).filter(r=>r.id!==n),!0)}var fe=xt();e.head("zxu34v",n=>{var r=gt(),f=e.first_child(r);{var w=y=>{e.deferred_template_effect(()=>{e.document.title=t.title??""})};e.if(f,y=>{t.control_page_title&&y(w)})}var k=e.sibling(f,2);{var j=y=>{var M=e.comment(),ae=e.first_child(M);e.html(ae,()=>`<style>${Be(t.css,t.version)}</style>`),e.append(y,M)};e.if(k,y=>{t.css&&y(j)})}e.append(n,r)});var se=e.first_child(fe);let ge;var X=e.child(se);let pe;var he=e.child(X);Ce(he,{get node(){return c.root}});var Se=e.sibling(he,2);{var ze=n=>{var r=mt(),f=e.child(r);{var w=C=>{var S=pt(),P=e.child(S);{var U=z=>{var q=e.text();e.template_effect(Y=>e.set_text(q,Y),[()=>i()("errors.use_via_api_or_mcp")]),e.append(z,q)},F=z=>{var q=e.text();e.template_effect(Y=>e.set_text(q,Y),[()=>i()("errors.use_via_api")]),e.append(z,q)};e.if(P,z=>{t.app.config?.mcp_server?z(U):z(F,!1)})}var I=e.sibling(P,2);e.reset(S),e.template_effect(z=>{e.set_attribute(I,"src",Ke),e.set_attribute(I,"alt",z)},[()=>i()("common.logo")]),e.event("click",S,()=>{W(!e.get(O))}),e.event("mouseenter",S,()=>{ie(),H()}),e.append(C,S)};e.if(f,C=>{t.footer_links.includes("api")&&C(w)})}var k=e.sibling(f,2);{var j=C=>{var S=ht(),P=e.sibling(e.first_child(S),2),U=e.child(P),F=e.sibling(U);e.reset(P),e.template_effect((I,z)=>{e.set_text(U,`${I??""} `),e.set_attribute(F,"src",Qe),e.set_attribute(F,"alt",z)},[()=>i()("common.built_with_gradio"),()=>i()("common.logo")]),e.append(C,S)};e.if(k,C=>{t.footer_links.includes("gradio")&&C(j)})}var y=e.sibling(k,2);let M;var ae=e.child(y),we=e.sibling(ae);e.reset(y);var Pe=e.sibling(y,4);{var Te=C=>{var S=vt(),P=e.first_child(S);let U;var F=e.sibling(P,2),I=e.child(F),z=e.sibling(I);e.reset(F),e.template_effect((q,Y)=>{U=e.set_class(P,1,"divider svelte-zxu34v",null,U,{hidden:!s()}),e.set_text(I,`${q??""} `),e.set_attribute(z,"src",Xe),e.set_attribute(z,"alt",Y)},[()=>i()("common.settings"),()=>i()("common.settings")]),e.event("click",F,()=>{Q(!e.get(m))}),e.event("mouseenter",F,()=>{J()}),e.append(C,S)};e.if(Pe,C=>{t.footer_links.includes("settings")&&C(Te)})}e.reset(r),e.template_effect((C,S)=>{M=e.set_class(y,1,"record svelte-zxu34v",null,M,{hidden:!s()}),e.set_text(ae,`${C??""} `),e.set_attribute(we,"src",Ye),e.set_attribute(we,"alt",S)},[()=>i()("common.stop_recording"),()=>i()("common.stop_recording")]),e.event("click",y,()=>{ue()}),e.bind_element_size(r,"clientHeight",C=>ce=C),e.append(n,r)};e.if(Se,n=>{t.footer_links.length>0&&n(ze)})}e.reset(X),e.bind_this(X,n=>K=n,()=>K);var ve=e.sibling(X,2);{var Re=n=>{var r=bt(),f=e.child(r);e.component(f,()=>A,(w,k)=>{k(w,{get api_calls(){return e.get(g)},get dependencies(){return t.dependencies}})}),e.reset(r),e.event("click",r,()=>{W(!0),e.set(h,!1)}),e.append(n,r)};e.if(ve,n=>{e.get(h)&&A&&n(Re)})}var me=e.sibling(ve,2);{var Oe=n=>{var r=wt(),f=e.child(r),w=e.sibling(f,2),k=e.child(w);e.component(k,()=>b,(j,y)=>{y(j,{get root_node(){return c.root},get dependencies(){return t.dependencies},get root(){return t.root},get app(){return t.app},get space_id(){return t.space_id},get api_calls(){return e.get(g)},get username(){return t.username},get last_api_call(){return e.get(D)},$$events:{close:M=>{W(!1),e.set(g,[],!0),e.set(h,e.set(h,M.detail?.api_recorder_visible))}}})}),e.reset(w),e.reset(r),e.event("click",f,()=>{W(!1)}),e.append(n,r)};e.if(me,n=>{e.get(O)&&c.root&&b&&n(Oe)})}var be=e.sibling(me,2);{var Ae=n=>{var r=yt(),f=e.child(r),w=e.sibling(f,2),k=e.child(w);e.component(k,()=>N,(j,y)=>{y(j,{get pwa_enabled(){return t.app.config.pwa},get root(){return t.root},get space_id(){return t.space_id},get allow_zoom(){return V},set allow_zoom(M){V=M},get allow_video_trim(){return B},set allow_video_trim(M){B=M},$$events:{close:()=>{Q(!1)},start_recording:()=>{ue()}}})}),e.reset(w),e.reset(r),e.event("click",f,()=>{Q(!1)}),e.append(n,r)};e.if(be,n=>{e.get(m)&&t.app.config&&c.root&&N&&n(Ae)})}var Me=e.sibling(be,2);{var De=n=>{var r=e.comment(),f=e.first_child(r);e.component(f,()=>e.get(Z),(w,k)=>{k(w,{get app(){return t.app},get root(){return t.root}})}),e.append(n,r)};e.if(Me,n=>{t.vibe_mode&&e.get(Z)&&n(De)})}e.reset(se);var je=e.sibling(se,2);{var Fe=n=>{Ze(n,{get messages(){return e.get(v)},on_close:Le})};e.if(je,n=>{e.get(v)&&n(Fe)})}e.template_effect(()=>{ge=e.set_style(se,"",ge,{"min-height":t.app_mode?"100%":"auto"}),pe=e.set_style(X,"",pe,{"flex-grow":t.app_mode?"1":"auto","margin-right":t.vibe_mode?`${x}px`:"0"})}),e.append(l,fe),e.pop(),_()}const Dt=Object.freeze(Object.defineProperty({__proto__:null,default:kt},Symbol.toStringTag,{value:"Module"}));export{Dt as B,Ke as a,Xe as s};
