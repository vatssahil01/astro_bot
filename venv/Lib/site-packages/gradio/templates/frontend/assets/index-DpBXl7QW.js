import"./svelte/svelte_internal_flags_legacy.js";import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import{createEventDispatcher as re,tick as ae}from"./svelte/svelte_svelte.js";import{U as le}from"./ModifyUpload-BeEGCb3i.js";import{b as se,V as oe,o as ne,B as O,U as ue}from"./IconButtonWrapper-CKkeBFM2.js";import"./i18n-jwgpNIDD.js";import{Webcam as ie}from"./Index-1JN81gPK.js";import{a as Q}from"./Video-06U9X4-1.js";import{l as et,p as tt}from"./Video-06U9X4-1.js";import{P as de,V as pe}from"./VideoPreview-MMzUmP2g.js";import{default as at}from"./Example-DsLdTxuF.js";import{G as _e}from"./utils.svelte-Ceck75cM.js";import{S as R}from"./StreamingBar-CiZ1eSYP.js";import"./index-CGvp2os9.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_store.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./MarkdownCode-DE3cszAA.js";import"./prism-python-t00J-xmS.js";import"./ImagePreview-wP3cuUYr.js";import"./ShareButton-l5f_cszo.js";import"./FullscreenButton-CLbadLV1.js";import"./Image-Bdf4wQSw.js";import"./Example-1lv5JGKJ.js";var ce=e.from_html('<div class="upload-container svelte-ey25pz"><!></div>'),ge=e.from_html('<div class="file-name svelte-ey25pz"> </div> <div class="file-size svelte-ey25pz"> </div>',1),he=e.from_html('<!> <div data-testid="video" class="video-container svelte-ey25pz"><!> <!></div>',1);function ve(j,a){e.push(a,!1);let l=e.prop(a,"value",12,null),f=e.prop(a,"subtitle",12,null),D=e.prop(a,"sources",28,()=>["webcam","upload"]),t=e.prop(a,"label",12,void 0),I=e.prop(a,"show_download_button",12,!1),S=e.prop(a,"show_label",12,!0),d=e.prop(a,"webcam_options",12),k=e.prop(a,"include_audio",12),z=e.prop(a,"autoplay",12),V=e.prop(a,"root",12),w=e.prop(a,"i18n",12),h=e.prop(a,"active_source",12,"webcam"),q=e.prop(a,"handle_reset_value",12,()=>{}),L=e.prop(a,"max_file_size",12,null),B=e.prop(a,"upload",12),T=e.prop(a,"stream_handler",12),s=e.prop(a,"loop",12),g=e.prop(a,"uploading",12,!1),v=e.prop(a,"upload_promise",12,null),U=e.mutable_source(!1);const p=re();function A({detail:r}){l(r),p("change",r),p("upload",r)}function y(){l(null),p("change",null),p("clear")}function P(r){e.set(U,!0),p("change",r)}function W({detail:r}){p("change",r)}let x=e.mutable_source(!1);e.legacy_pre_effect(()=>e.get(x),()=>{p("drag",e.get(x))}),e.legacy_pre_effect_reset();var o={get value(){return l()},set value(r){l(r),e.flush()},get subtitle(){return f()},set subtitle(r){f(r),e.flush()},get sources(){return D()},set sources(r){D(r),e.flush()},get label(){return t()},set label(r){t(r),e.flush()},get show_download_button(){return I()},set show_download_button(r){I(r),e.flush()},get show_label(){return S()},set show_label(r){S(r),e.flush()},get webcam_options(){return d()},set webcam_options(r){d(r),e.flush()},get include_audio(){return k()},set include_audio(r){k(r),e.flush()},get autoplay(){return z()},set autoplay(r){z(r),e.flush()},get root(){return V()},set root(r){V(r),e.flush()},get i18n(){return w()},set i18n(r){w(r),e.flush()},get active_source(){return h()},set active_source(r){h(r),e.flush()},get handle_reset_value(){return q()},set handle_reset_value(r){q(r),e.flush()},get max_file_size(){return L()},set max_file_size(r){L(r),e.flush()},get upload(){return B()},set upload(r){B(r),e.flush()},get stream_handler(){return T()},set stream_handler(r){T(r),e.flush()},get loop(){return s()},set loop(r){s(r),e.flush()},get uploading(){return g()},set uploading(r){g(r),e.flush()},get upload_promise(){return v()},set upload_promise(r){v(r),e.flush()}};e.init();var b=he(),J=e.first_child(b);{let r=e.derived_safe_equal(()=>t()||"Video");se(J,{get show_label(){return S()},get Icon(){return oe},get label(){return e.get(r)}})}var K=e.sibling(J,2),M=e.child(K);{var X=r=>{var G=ce(),C=e.child(G);{var F=u=>{{let m=e.derived_safe_equal(()=>(e.deep_read_state(w()),e.untrack(()=>w()("video.drop_to_upload"))));le(u,{filetype:"video/x-m4v,video/*",get max_file_size(){return L()},get root(){return V()},get upload(){return B()},get stream_handler(){return T()},get aria_label(){return e.get(m)},get upload_promise(){return v()},set upload_promise(n){v(n)},get dragging(){return e.get(x)},set dragging(n){e.set(x,n)},get uploading(){return g()},set uploading(n){g(n)},$$events:{load:A,error:({detail:n})=>p("error",n)},children:(n,E)=>{var _=e.comment(),c=e.first_child(_);e.slot(c,a,"default",{},null),e.append(n,_)},$$slots:{default:!0},$$legacy:!0})}},H=u=>{var m=e.comment(),n=e.first_child(m);{var E=_=>{ie(_,{get root(){return V()},get mirror_webcam(){return e.deep_read_state(d()),e.untrack(()=>d().mirror)},get webcam_constraints(){return e.deep_read_state(d()),e.untrack(()=>d().constraints)},get include_audio(){return k()},mode:"video",get i18n(){return w()},get upload(){return B()},stream_every:1,$$events:{error(c){e.bubble_event.call(this,a,c)},capture:W,start_recording(c){e.bubble_event.call(this,a,c)},stop_recording(c){e.bubble_event.call(this,a,c)}}})};e.if(n,_=>{h()==="webcam"&&_(E)},!0)}e.append(u,m)};e.if(C,u=>{h()==="upload"?u(F):u(H,!1)})}e.reset(G),e.append(r,G)},Y=r=>{var G=e.comment(),C=e.first_child(G);{var F=u=>{var m=e.comment(),n=e.first_child(m);e.key(n,()=>(e.deep_read_state(l()),e.untrack(()=>l()?.url)),E=>{{let _=e.derived_safe_equal(()=>(e.deep_read_state(f()),e.untrack(()=>f()?.url))),c=e.derived_safe_equal(()=>(e.deep_read_state(d()),e.deep_read_state(h()),e.untrack(()=>d().mirror&&h()==="webcam")));de(E,{get upload(){return B()},get root(){return V()},interactive:!0,get autoplay(){return z()},get src(){return e.deep_read_state(l()),e.untrack(()=>l().url)},get subtitle(){return e.get(_)},is_stream:!1,get mirror(){return e.get(c)},get label(){return t()},handle_change:P,get handle_reset_value(){return q()},get loop(){return s()},get value(){return l()},get i18n(){return w()},get show_download_button(){return I()},handle_clear:y,get has_change_history(){return e.get(U)},$$events:{play(i){e.bubble_event.call(this,a,i)},pause(i){e.bubble_event.call(this,a,i)},stop(i){e.bubble_event.call(this,a,i)},end(i){e.bubble_event.call(this,a,i)},error(i){e.bubble_event.call(this,a,i)}}})}}),e.append(u,m)},H=u=>{var m=e.comment(),n=e.first_child(m);{var E=_=>{var c=ge(),i=e.first_child(c),$=e.child(i,!0);e.reset(i);var N=e.sibling(i,2),ee=e.child(N,!0);e.reset(N),e.template_effect(te=>{e.set_text($,(e.deep_read_state(l()),e.untrack(()=>l().orig_name||l().url))),e.set_text(ee,te)},[()=>(e.deep_read_state(Q),e.deep_read_state(l()),e.untrack(()=>Q(l().size)))]),e.append(_,c)};e.if(n,_=>{e.deep_read_state(l()),e.untrack(()=>l().size)&&_(E)},!0)}e.append(u,m)};e.if(C,u=>{e.deep_read_state(l()),e.untrack(()=>l()?.url)?u(F):u(H,!1)},!0)}e.append(r,G)};e.if(M,r=>{e.deep_read_state(l()),e.untrack(()=>l()===null||l()?.url===void 0)?r(X):r(Y,!1)})}var Z=e.sibling(M,2);return ne(Z,{get sources(){return D()},handle_clear:y,get active_source(){return h()},set active_source(r){h(r)},$$legacy:!0}),e.reset(K),e.append(j,b),e.pop(o)}var me=e.from_html("<!> <!>",1),fe=e.from_html("<!> <!>",1);function Ye(j,a){e.push(a,!0);const l=e.rest_props(a,["$$slots","$$events","$$legacy"]);let f=e.state(void 0);class D extends _e{async get_data(){return e.get(f)&&(await e.get(f),await ae()),await super.get_data()}}const t=new D(l);let I=e.state(e.proxy(t.props.value)),S=e.state(!1),d=e.state(!1),k=e.derived(()=>t.props.sources?t.props.sources[0]:void 0),z=t.props.value;e.user_effect(()=>{e.get(I)!=t.props.value&&(e.set(I,t.props.value,!0),t.dispatch("change"))});const V=()=>{z===null||t.props.value===z||(t.props.value=z)};function w({detail:s}){s!=null?t.props.value=s:t.props.value=null}function h({detail:s}){const[g,v]=s.includes("Invalid file type")?["warning","complete"]:["error","error"];t.shared.loading_status.status=v,t.shared.loading_status.message=s,t.dispatch(g,s)}var q=e.comment(),L=e.first_child(q);{var B=s=>{{let g=e.derived(()=>t.props.value===null&&e.get(k)==="upload"?"dashed":"solid"),v=e.derived(()=>e.get(d)?"focus":"base"),U=e.derived(()=>t.props.height||void 0);O(s,{get visible(){return t.shared.visible},get variant(){return e.get(g)},get border_mode(){return e.get(v)},padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get height(){return e.get(U)},get width(){return t.props.width},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},allow_overflow:!1,children:(p,A)=>{var y=me(),P=e.first_child(y);R(P,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var W=e.sibling(P,2);{let x=e.derived(()=>(t.props.buttons||[]).includes("share")),o=e.derived(()=>(t.props.buttons||["download"]).includes("download"));pe(W,{get value(){return t.props.value},get subtitle(){return t.props.subtitles},get label(){return t.shared.label},get show_label(){return t.shared.show_label},get autoplay(){return t.props.autoplay},get loop(){return t.props.loop},get show_share_button(){return e.get(x)},get show_download_button(){return e.get(o)},get i18n(){return t.i18n},upload:(...b)=>t.shared.client.upload(...b),$$events:{play:()=>t.dispatch("play"),pause:()=>t.dispatch("pause"),stop:()=>t.dispatch("stop"),end:()=>t.dispatch("end"),share:({detail:b})=>t.dispatch("share",b),error:({detail:b})=>t.dispatch("error",b)}})}e.append(p,y)},$$slots:{default:!0}})}},T=s=>{{let g=e.derived(()=>t.props.value===null&&e.get(k)==="upload"?"dashed":"solid"),v=e.derived(()=>e.get(d)?"focus":"base"),U=e.derived(()=>t.props.height||void 0);O(s,{get visible(){return t.shared.visible},get variant(){return e.get(g)},get border_mode(){return e.get(v)},padding:!1,get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get height(){return e.get(U)},get width(){return t.props.width},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},allow_overflow:!1,children:(p,A)=>{var y=fe(),P=e.first_child(y);R(P,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var W=e.sibling(P,2);{let x=e.derived(()=>(t.props.buttons||[]).includes("download"));ve(W,{get value(){return t.props.value},get subtitle(){return t.props.subtitles},get label(){return t.shared.label},get show_label(){return t.shared.show_label},get show_download_button(){return e.get(x)},get sources(){return t.props.sources},get active_source(){return e.get(k)},get webcam_options(){return t.props.webcam_options},get include_audio(){return t.props.include_audio},get autoplay(){return t.props.autoplay},get root(){return t.shared.root},get loop(){return t.props.loop},handle_reset_value:V,get i18n(){return t.i18n},get max_file_size(){return t.shared.max_file_size},upload:(...o)=>t.shared.client.upload(...o),stream_handler:(...o)=>t.shared.client.stream(...o),get upload_promise(){return e.get(f)},set upload_promise(o){e.set(f,o,!0)},get uploading(){return e.get(S)},set uploading(o){e.set(S,o,!0)},$$events:{change:w,drag:({detail:o})=>e.set(d,o,!0),error:h,clear:()=>{t.props.value=null,t.dispatch("clear")},play:()=>t.dispatch("play"),pause:()=>t.dispatch("pause"),upload:()=>t.dispatch("upload"),stop:()=>t.dispatch("stop"),end:()=>t.dispatch("end"),start_recording:()=>t.dispatch("start_recording"),stop_recording:()=>t.dispatch("stop_recording")},children:(o,b)=>{ue(o,{get i18n(){return t.i18n},type:"video"})},$$slots:{default:!0}})}e.append(p,y)},$$slots:{default:!0}})}};e.if(L,s=>{t.shared.interactive?s(T,!1):s(B)})}e.append(j,q),e.pop()}export{at as BaseExample,ve as BaseInteractiveVideo,de as BasePlayer,pe as BaseStaticVideo,Ye as default,et as loaded,tt as playable,Q as prettyBytes};
